PROPOSAL TUGAS BESAR
MATA KULIAH INTEGRASI APLIKASI ENTERPRISE
JUDUL: SISTEM AKADEMIK BERBASIS MICROSERVICES DENGAN INDEPENDENT JWT AUTHENTICATION
Integrasi Internal (Auth–Course–Enrollment) dan Integrasi Eksternal (Payment Gateway Lintas Kelompok)

RINGKASAN 
Proyek ini mengimplementasikan sistem akademik terdistribusi yang dibangun menggunakan pendekatan microservices dan berkomunikasi melalui GraphQL di atas HTTP, serta dideploy secara terisolasi menggunakan Docker. Fokus utama desain adalah pemisahan tegas antara keamanan/identitas dan logika bisnis, melalui Independent Auth Service sebagai penerbit token JWT. Service lain bersifat stateless terhadap data user (tidak memiliki tabel user/password), dan hanya melakukan verifikasi token serta mengkonsumsi data dari service internal maupun eksternal.

Proyek ini juga memenuhi aspek integrasi lintas kelompok: sistem kami wajib mengkonsumsi endpoint GraphQL milik kelompok lain (Payment) sebagai prasyarat pengambilan KRS, sekaligus menyediakan endpoint GraphQL agar dapat digunakan oleh kelompok lain (sebagai provider).


1. PENDAHULUAN
1.1 Latar Belakang
Sistem enterprise modern menuntut modularitas, skalabilitas, dan interoperabilitas. Dalam konteks akademik (KRS), kebutuhan utama meliputi autentikasi yang konsisten, manajemen katalog kurikulum yang dapat berkembang, serta transaksi pengambilan mata kuliah yang harus mengikuti aturan bisnis (kuota, batas SKS, dan prasyarat administratif seperti pembayaran).

Karena sistem bersifat terdistribusi, maka kontrol akses tidak boleh tersebar secara tidak konsisten. Oleh karena itu, proposal ini menerapkan Independent Auth Service untuk mengonsolidasikan identitas dan otorisasi, sementara layanan bisnis (Course & Enrollment) memusatkan diri pada aturan domain masing-masing.
1.2 Tujuan Pembelajaran (Learning Outcomes)
Selaras dengan tujuan tugas besar: membangun sistem modular terintegrasi, melakukan deployment berbasis container, mengimplementasikan GraphQL, serta membuktikan integrasi lintas kelompok.
1.3 Ruang Lingkup dan Batasan
Ruang lingkup:

3 layanan internal: Auth, Course, Enrollment (masing-masing 1 orang 1 service).
Integrasi eksternal wajib: Payment Service milik kelompok lain (provider eksternal via GraphQL).
Tiap service memiliki database terpisah (1 service 1 database sebagai target ideal).

Batasan:

Sistem payment bersifat external dependency; disimulasikan berdasarkan kontrak API kelompok lain.



2. ARSITEKTUR SISTEM (OVERVIEW)
2.1 Prinsip Desain
Separation of Concerns: identitas & autentikasi dipisahkan dari domain akademik.
Service Autonomy: tiap layanan memiliki database sendiri untuk menghindari tight coupling.
Interoperability: komunikasi antarlayanan menggunakan GraphQL untuk kontrak data yang eksplisit.
Containerized Deployment: semua layanan berjalan terpisah pada container berbeda (memenuhi aspek deployment).
2.2 Komponen dan Tanggung Jawab
Auth Service (JWT Provider)
Course Service (Academic Catalog)
Enrollment Service (KRS Transaction & Orchestration)
External Payment Service (Kelompok Lain) – sebagai dependency wajib
2.3 Diagram FlowChart

3. PEMBAGIAN PERAN (1 MEMBER 1 SERVICE)
Struktur ini mengikuti ketentuan “1 orang 1 layanan per kelompok”.
Anggota 1 (NIM - NAMA) — Security & Identity Engineer
Service: Auth Service (Independent JWT Provider) Fokus: autentikasi, otorisasi berbasis role, manajemen identitas.

Ruang kerja teknis:

Authentication Endpoint

Login menghasilkan Access Token JWT dengan klaim minimal: sub (user_id), nim, role, exp.

Identity Management

Registrasi mahasiswa dan CRUD profil (NIM, nama lengkap, prodi, dsb.) berada di service ini sebagai single source of truth.

Password Security

Hashing password dengan bcrypt/passlib, termasuk kebijakan minimal (salt, cost factor).

GraphQL Provider

Query minimal:

me: profil user berdasarkan token
studentById(id: ID!): profil mahasiswa untuk kebutuhan service lain

Database: PostgreSQL (auth_db)

Tech Stack (disarankan konsisten): FastAPI + Strawberry GraphQL + PyJWT/Jose + SQLModel/ORM

Catatan interoperabilitas: Auth service menyediakan endpoint GraphQL yang stabil agar dapat dimanfaatkan kelompok lain (sebagai provider lintas kelompok).


Anggota 2 (NIM - NAMA) — Academic Catalog Manager
Service: Course Service (Katalog Kurikulum) Fokus: data master mata kuliah dan kebijakan kuota/SKS.

Ruang kerja teknis:

Catalog CRUD

Mata kuliah (kode, nama, SKS, kuota, deskripsi, semester rekomendasi).

Authorization

Hanya role tertentu (mis. admin/kaprodi) boleh mengubah katalog.
Implementasi middleware validasi JWT dari header Authorization: Bearer <token>.

GraphQL Provider

Query minimal:

courses(filter, paging)
course(id: ID!)

Mutation minimal:

createCourse, updateCourse, deleteCourse (role-based)

Database: MongoDB (catalog_db) atau PostgreSQL (opsional; disepakati tim).

Tech Stack: Node.js (Express + Apollo) atau FastAPI + Strawberry (disarankan seragam untuk mengurangi context switching tim).


Anggota 3 (NIM - NAMA)  — System Integrator / Team Lead
Service: Enrollment Service (Transaksi KRS + Orkestrasi Integrasi) Fokus: implementasi aturan bisnis dan integrasi internal-eksternal.

Ruang kerja teknis:

Business Transaction

Membuat transaksi KRS (enroll/unenroll), menyimpan histori, status, dan ringkasan SKS.

Internal Service Consumption

Memanggil Auth Service untuk mendapatkan profil mahasiswa (berdasarkan sub/nim).
Memanggil Course Service untuk validasi mata kuliah (kuota, SKS).

External Service Consumption (Lintas Kelompok)

Wajib memanggil Payment Service milik kelompok lain via GraphQL untuk memastikan status pembayaran sebelum enrollment disetujui.

Database: PostgreSQL (enrollment_db)

Tech Stack: FastAPI + HTTPX Async Client + SQLModel/ORM


4. MEKANISME JWT & MODEL KEAMANAN
4.1 Prinsip “Independent Auth”
Hanya Auth Service yang menyimpan kredensial.
Course dan Enrollment tidak menyimpan tabel user/password.
Service bisnis memverifikasi token pada layer API, lalu mengakses data identitas lewat kontrak GraphQL bila dibutuhkan.
4.2 Opsi Validasi Token (Dipilih Salah Satu)
Opsi A — Stateless Verification (HS256 / RS256)

Service bisnis memverifikasi signature token secara lokal.
Rekomendasi: RS256 agar tidak perlu berbagi secret; cukup berbagi public key.

Opsi B — Token Introspection

Service bisnis memanggil endpoint Auth untuk validasi token 
4.3 Kebijakan Token Minimal
Access Token short-lived (mis. 15–30 menit).

Penanganan error standar:

401 Unauthorized untuk token invalid/expired
403 Forbidden untuk role tidak sesuai


5. ALUR INTEGRASI (INTERNAL & EKSTERNAL)
5.1 Sequence Diagram (Wajib Mengandung Integrasi Lintas Kelompok)

5.2 Aturan Bisnis Minimal Enrollment 
Mahasiswa hanya boleh mengambil mata kuliah bila:

Token valid dan role sesuai (mis. student)
Status pembayaran PAID dari service eksternal
Mata kuliah tersedia dan kuota mencukupi
Total SKS tidak melebihi batas (mis. 24 SKS)


6. KONTRAK GRAPHQL (RINGKASAN DESAIN SKEMA)
Agar penilaian GraphQL kuat (skema lengkap, query efisien, dokumentasi jelas), setiap service menyiapkan file .graphql dan contoh query/mutation.

Auth Service (contoh ringkas):

type Query { me: Student studentById(id: ID!): Student }
type Mutation { login(username:String!, password:String!): AuthPayload registerStudent(input: RegisterInput!): Student }

Course Service (contoh ringkas):

type Query { courses: [Course!]! course(id:ID!): Course }
type Mutation { createCourse(input: CourseInput!): Course updateCourse(id:ID!, input: CourseInput!): Course }

Enrollment Service (contoh ringkas):

type Query { myEnrollments: [Enrollment!]! }
type Mutation { enroll(courseId:ID!): EnrollmentResult unenroll(enrollmentId:ID!): Boolean }

Payment External (dikonsumsi):

type Query { checkPayment(nim:String!): PaymentStatus }


7. STRATEGI DEPLOYMENT DOCKER & TOPOLOGI JARINGAN
Sistem dijalankan via docker-compose.yml agar semua service berjalan pada network yang sama, dengan database masing-masing sebagai container terpisah. Rekomendasi struktur:

auth-service + auth-db
course-service + catalog-db
enrollment-service + enrollment-db
payment-service (external; bisa pakai URL dari kelompok lain, atau container mock saat pengujian lokal)

Target penilaian: semua service terpisah dalam container berbeda dan dapat dijalankan ulang dengan setup yang rapi.

8. RENCANA INTEGRASI LINTAS KELOMPOK (WAJIB)
Sesuai ketentuan: endpoint lintas kelompok tersedia, terdokumentasi, dan minimal mengkonsumsi 1 endpoint GraphQL dari kelompok lain.

Sebagai Consumer (wajib):

Enrollment Service mengkonsumsi:

query { checkPayment(nim: "123") { status paidAt } }

Sebagai Provider (nilai tambah dan bukti integrasi nyata):

Auth Service menyediakan:

query { studentById(id:"123"){ fullName nim faculty } }


9. RENCANA PENGUJIAN & BUKTI (SCREENSHOT)
Agar memenuhi deliverables dokumentasi (diagram, desain skema, penjelasan integrasi, dan screenshot komunikasi), tim menyiapkan bukti berikut.

Bukti minimal yang akan dikumpulkan(:

Screenshot GraphQL Playground: login menghasilkan token.
Screenshot request enrollment membawa JWT dan sukses setelah cek payment.
Screenshot log antar container (Enrollment memanggil Auth, Course, dan Payment).
Screenshot docker ps dan service healthcheck berjalan.


10. TIMELINE PENGERJAAN (MINGGU 13–16)
Timeline mengikuti ketentuan pengerjaan minggu 13–16 dengan weekly daily report dan pengujian/presentasi minggu 16.


11. DELIVERABLES (SESUSAI KETENTUAN)
Deliverables disusun sesuai syarat: laporan PDF berisi arsitektur+diagram, desain skema GraphQL, penjelasan integrasi lintas kelompok, dan screenshot; serta repo dengan struktur rapi, docker-compose.yml (direkomendasikan), serta file .graphql.

Dokumentasi Proyek (PDF)

Deskripsi arsitektur + diagram integrasi
Skema GraphQL per service + contoh query/mutation
Narasi integrasi lintas kelompok (consumer & provider)
Lampiran screenshot komunikasi antar layanan

Kode Program (GitHub Repository)

Struktur folder: /auth-service, /course-service, /enrollment-service
docker-compose.yml + Dockerfile masing-masing
Folder schemas/*.graphql dan queries/*.graphql

Presentasi & Demo

Demo alur: Login → Token → Enroll (cek payment)
Penjelasan peran tiap service dan komunikasi antar container

12. KRITERIA KEBERHASILAN (ACCEPTANCE CRITERIA)
Semua layanan dapat dijalankan melalui Docker dan saling terhubung via network compose.
GraphQL schema dapat diakses dan diuji; query berjalan konsisten.
Integrasi lintas kelompok terbukti: Enrollment memanggil Payment eksternal dan hasilnya mempengaruhi keputusan bisnis.
Dokumentasi lengkap dan dapat direplikasi oleh dosen/asisten.




